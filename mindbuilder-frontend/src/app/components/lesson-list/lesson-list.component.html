<div class="lesson-management-container" style="font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif; padding: 20px; max-width: 1440px; margin: 0 auto;">
  <div class="d-flex justify-content-between align-items-center mb-6 p-4" style="background: linear-gradient(135deg, #f6f9fc 0%, #f0f4f8 100%); border-radius: 16px; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05); flex-wrap: wrap; gap: 16px;">
    <div>
      <h2 style="color: #1a2b50; margin: 0; font-weight: 700; font-size: 1.875rem; line-height: 1.2;">Lesson Management</h2>
      <p style="color: #64748b; margin: 4px 0 0; font-size: 0.875rem;">Manage and organize your teaching materials</p>
    </div>
    <button class="add-lesson-btn" (click)="openAddModal(lessonModal)" style="background: linear-gradient(135deg, #2596be 0%, #1a7a9b 100%); color: white; border: none; padding: 12px 24px; border-radius: 10px; font-weight: 600; font-size: 1rem; display: flex; align-items: center; gap: 8px; cursor: pointer; transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1); box-shadow: 0 2px 10px rgba(37, 150, 190, 0.3);" onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 4px 16px rgba(37, 150, 190, 0.4)';" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 10px rgba(37, 150, 190, 0.3)';">
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="margin-right: 4px;">
        <path d="M12 4V20M4 12H20" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
      </svg>
      Add Lesson
    </button>
  </div>

  <div class="card-container" style="background-color: white; border-radius: 16px; box-shadow: 0 8px 24px rgba(0, 0, 0, 0.08); overflow: hidden;">
    <div class="card-header" style="padding: 20px 24px; border-bottom: 1px solid #f1f5f9; background-color: #ffffff; display: flex; flex-wrap: wrap; align-items: center; justify-content: space-between; gap: 16px;">
      <div class="search-col" style="flex: 1; min-width: 240px; max-width: 480px; position: relative;">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="position: absolute; left: 16px; top: 50%; transform: translateY(-50%); color: #94a3b8;">
          <path d="M11 19C15.4183 19 19 15.4183 19 11C19 6.58172 15.4183 3 11 3C6.58172 3 3 6.58172 3 11C3 15.4183 6.58172 19 11 19Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M21 21L16.65 16.65" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        <input type="text" class="search-input" placeholder="Search lessons..." [(ngModel)]="searchText" name="searchText" (input)="applyFilter()" style="width: 100%; padding: 12px 16px 12px 48px; border: 1px solid #e2e8f0; border-radius: 10px; color: #1e293b; font-size: 1rem; outline: none; transition: all 0.3s ease; background-color: #f8fafc;" onfocus="this.style.borderColor='#2596be'; this.style.boxShadow='0 0 0 3px rgba(37, 150, 190, 0.2)'; this.style.backgroundColor='white';" onblur="this.style.borderColor='#e2e8f0'; this.style.boxShadow='none'; this.style.backgroundColor='#f8fafc';">
      </div>
      <div class="filter-col" style="flex: 0 0 auto; min-width: 180px; position: relative;">
        <select class="filter-select" [(ngModel)]="filterBy" name="filterBy" (change)="applyFilter()" style="width: 100%; padding: 12px 16px; border: 1px solid #e2e8f0; border-radius: 10px; color: #1e293b; font-size: 1rem; outline: none; cursor: pointer; background-color: #f8fafc; appearance: none; transition: all 0.3s ease;" onfocus="this.style.borderColor='#2596be'; this.style.boxShadow='0 0 0 3px rgba(37, 150, 190, 0.2)'; this.style.backgroundColor='white';" onblur="this.style.borderColor='#e2e8f0'; this.style.boxShadow='none'; this.style.backgroundColor='#f8fafc';">
          <option value="all">All Lessons</option>
          <option value="price">By Price</option>
          <option value="duration">By Duration</option>
          <option value="difficulty">By Difficulty</option>
          <option value="status">By Status</option>
        </select>
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="position: absolute; right: 16px; top: 50%; transform: translateY(-50%); pointer-events: none; color: #64748b;">
          <path d="M6 9L12 15L18 9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </div>
    </div>

    <!-- Table Section -->
    <div class="card-body" style="padding: 0;">
      <div class="table-responsive" style="overflow-x: auto; -webkit-overflow-scrolling: touch;">
        <table class="lesson-table" style="width: 100%; border-collapse: separate; border-spacing: 0; font-size: 0.95rem; min-width: 800px;">
          <thead style="background-color: #f8fafc; text-transform: uppercase; letter-spacing: 0.5px;">
          <tr>
            <th style="padding: 16px 24px; text-align: left; color: #64748b; font-weight: 600; border-bottom: 1px solid #e2e8f0; font-size: 0.8rem;">ID</th>
            <th style="padding: 16px 24px; text-align: left; color: #64748b; font-weight: 600; border-bottom: 1px solid #e2e8f0; font-size: 0.8rem;">Title</th>
            <th style="padding: 16px 24px; text-align: left; color: #64748b; font-weight: 600; border-bottom: 1px solid #e2e8f0; font-size: 0.8rem;">Description</th>
            <th style="padding: 16px 24px; text-align: left; color: #64748b; font-weight: 600; border-bottom: 1px solid #e2e8f0; font-size: 0.8rem;">Price</th>
            <th style="padding: 16px 24px; text-align: left; color: #64748b; font-weight: 600; border-bottom: 1px solid #e2e8f0; font-size: 0.8rem;">Duration</th>
            <th style="padding: 16px 24px; text-align: left; color: #64748b; font-weight: 600; border-bottom: 1px solid #e2e8f0; font-size: 0.8rem;">Difficulty</th>
            <th style="padding: 16px 24px; text-align: left; color: #64748b; font-weight: 600; border-bottom: 1px solid #e2e8f0; font-size: 0.8rem;">Status</th>
            <th style="padding: 16px 24px; text-align: left; color: #64748b; font-weight: 600; border-bottom: 1px solid #e2e8f0; font-size: 0.8rem;">Actions</th>
          </tr>
          </thead>
          <tbody>
          <tr *ngFor="let lesson of filteredLessons" class="lesson-row" style="border-bottom: 1px solid #f1f5f9; transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);" onmouseover="this.style.backgroundColor='#f8fafc'; this.style.transform='translateY(-1px)';" onmouseout="this.style.backgroundColor='white'; this.style.transform='translateY(0)';">
            <td style="padding: 16px 24px; color: #334155; vertical-align: middle; font-weight: 500; font-family: 'Roboto Mono', monospace;">#{{ lesson.lessonId }}</td>
            <td style="padding: 16px 24px; color: #1e293b; vertical-align: middle; font-weight: 600;">{{ lesson.title }}</td>
            <td style="padding: 16px 24px; color: #64748b; vertical-align: middle; max-width: 300px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">{{ lesson.description }}</td>
            <td style="padding: 16px 24px; color: #1e293b; vertical-align: middle; font-weight: 600;">{{ lesson.price | currency:lesson.currency:'symbol':'1.2-2' }}</td>
            <td style="padding: 16px 24px; color: #1e293b; vertical-align: middle; font-weight: 500;">{{ lesson.durationMinutes }} min</td>
            <td style="padding: 16px 24px; vertical-align: middle;">
              <span style="display: inline-flex; align-items: center; gap: 6px;">
                <span [ngSwitch]="lesson.difficultyLevel">
                  <span *ngSwitchCase="'Beginner'" style="color: #22c55e;">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
                    </svg>
                  </span>
                  <span *ngSwitchCase="'Intermediate'" style="color: #f59e0b;">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
                      <circle cx="12" cy="12" r="5" fill="currentColor"/>
                    </svg>
                  </span>
                  <span *ngSwitchCase="'Advanced'" style="color: #ef4444;">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M12 2V4M12 20V22M4 12H2M6.31412 6.31412L4.8999 4.8999M17.6859 6.31412L19.1001 4.8999M6.31412 17.69L4.8999 19.1042M17.6859 17.69L19.1001 19.1042M22 12H20M16 12C16 14.2091 14.2091 16 12 16C9.79086 16 8 14.2091 8 12C8 9.79086 9.79086 8 12 8C14.2091 8 16 9.79086 16 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                  </span>
                </span>
                {{ lesson.difficultyLevel }}
              </span>
            </td>
            <td style="padding: 16px 24px; vertical-align: middle;">
              <span style="padding: 6px 12px; border-radius: 20px; font-size: 0.8rem; display: inline-flex; align-items: center; gap: 6px; font-weight: 600; letter-spacing: 0.5px;" [ngStyle]="{
                'background-color': lesson.status === LessonStatus.APPROVED ? '#ecfdf5' : lesson.status === LessonStatus.PENDING ? '#fffbeb' : '#fef2f2',
                'color': lesson.status === LessonStatus.APPROVED ? '#065f46' : lesson.status === LessonStatus.PENDING ? '#92400e' : '#991b1b'
              }">
                <span [ngSwitch]="lesson.status">
                  <span *ngSwitchCase="LessonStatus.APPROVED" style="width: 8px; height: 8px; background-color: #10b981; border-radius: 50%;"></span>
                  <span *ngSwitchCase="LessonStatus.PENDING" style="width: 8px; height: 8px; background-color: #f59e0b; border-radius: 50%;"></span>
                  <span *ngSwitchDefault style="width: 8px; height: 8px; background-color: #ef4444; border-radius: 50%;"></span>
                </span>
                {{ lesson.status }}
              </span>
            </td>
            <td style="padding: 16px 24px; vertical-align: middle;">
              <div class="action-buttons" style="display: flex; gap: 8px; flex-wrap: wrap;">
                <button class="edit-btn" (click)="openEditModal(lessonModal, lesson)" style="background-color: transparent; border: 1px solid #e2e8f0; color: #2596be; padding: 8px 12px; border-radius: 8px; cursor: pointer; transition: all 0.3s ease; font-size: 0.85rem; font-weight: 500; display: inline-flex; align-items: center; gap: 6px;" onmouseover="this.style.backgroundColor='#f0f9ff'; this.style.borderColor='#bae6fd'; this.style.transform='translateY(-1px)';" onmouseout="this.style.backgroundColor='transparent'; this.style.borderColor='#e2e8f0'; this.style.transform='translateY(0)';">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M11 4H4C3.46957 4 2.96086 4.21071 2.58579 4.58579C2.21071 4.96086 2 5.46957 2 6V20C2 20.5304 2.21071 21.0391 2.58579 21.4142C2.96086 21.7893 3.46957 22 4 22H18C18.5304 22 19.0391 21.7893 19.4142 21.4142C19.7893 21.0391 20 20.5304 20 20V13" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M18.5 2.5C18.8978 2.10217 19.4374 1.87868 20 1.87868C20.5626 1.87868 21.1022 2.10217 21.5 2.5C21.8978 2.89782 22.1213 3.43739 22.1213 4C22.1213 4.56261 21.8978 5.10217 21.5 5.5L12 15L8 16L9 12L18.5 2.5Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                  Edit
                </button>
                <button class="delete-btn" (click)="confirmDelete(deleteModal, lesson.lessonId)" style="background-color: transparent; border: 1px solid #fee2e2; color: #dc3545; padding: 8px 12px; border-radius: 8px; cursor: pointer; transition: all 0.3s ease; font-size: 0.85rem; font-weight: 500; display: inline-flex; align-items: center; gap: 6px;" onmouseover="this.style.backgroundColor='#fef2f2'; this.style.borderColor='#fecaca'; this.style.transform='translateY(-1px)';" onmouseout="this.style.backgroundColor='transparent'; this.style.borderColor='#fee2e2'; this.style.transform='translateY(0)';">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M3 6H5H21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M8 6V4C8 3.46957 8.21071 2.96086 8.58579 2.58579C8.96086 2.21071 9.46957 2 10 2H14C14.5304 2 15.0391 2.21071 15.4142 2.58579C15.7893 2.96086 16 3.46957 16 4V6M19 6V20C19 20.5304 18.7893 21.0391 18.4142 21.4142C18.0391 21.7893 17.5304 22 17 22H7C6.46957 22 5.96086 21.7893 5.58579 21.4142C5.21071 21.0391 5 20.5304 5 20V6H19Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M10 11V17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M14 11V17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                  Delete
                </button>
<!--                <button class="view-btn" (click)="viewLessonDetails(lesson.lessonId)" style="background-color: transparent; border: 1px solid #e2e8f0; color: #64748b; padding: 8px 12px; border-radius: 8px; cursor: pointer; transition: all 0.3s ease; font-size: 0.85rem; font-weight: 500; display: inline-flex; align-items: center; gap: 6px;" onmouseover="this.style.backgroundColor='#f8fafc'; this.style.borderColor='#e2e8f0'; this.style.transform='translateY(-1px)';" onmouseout="this.style.backgroundColor='transparent'; this.style.borderColor='#e2e8f0'; this.style.transform='translateY(0)';">-->
<!--                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">-->
<!--                    <path d="M1 12C1 12 5 4 12 4C19 4 23 12 23 12C23 12 19 20 12 20C5 20 1 12 1 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>-->
<!--                    <path d="M12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>-->
<!--                  </svg>-->
<!--                </button>-->
              </div>
            </td>
          </tr>
          <tr *ngIf="filteredLessons.length === 0">
            <td colspan="8" style="padding: 40px 24px; text-align: center; color: #94a3b8; font-size: 1rem; font-style: italic; background-color: #f8fafc;">
              <div style="display: flex; flex-direction: column; align-items: center; gap: 16px;">
                <svg width="64" height="64" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="color: #cbd5e1;">
                  <path d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  <path d="M12 8V12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  <path d="M12 16H12.01" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <p style="margin: 0; font-size: 1.1rem; font-weight: 500;">No lessons found</p>
                <p style="margin: 0; font-size: 0.9rem;">Try adjusting your search or filter criteria</p>
              </div>
            </td>
          </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- Pagination -->
<!--    <div class="card-footer" style="padding: 20px 24px; border-top: 1px solid #f1f5f9; background-color: #ffffff; display: flex; flex-wrap: wrap; align-items: center; justify-content: space-between; gap: 16px;">-->
<!--      <div class="pagination-info" style="color: #64748b; font-size: 0.875rem;">-->
<!--        Showing <span style="font-weight: 600; color: #1e293b;">{{ (currentPage - 1) * itemsPerPage + 1 }}</span> to <span style="font-weight: 600; color: #1e293b;">{{ Math.min(currentPage * itemsPerPage, filteredLessons.length) }}</span> of <span style="font-weight: 600; color: #1e293b;">{{ filteredLessons.length }}</span> lessons-->
<!--      </div>-->
<!--      <div class="pagination-controls" style="display: flex; gap: 8px;">-->
<!--        <button (click)="previousPage()" [disabled]="currentPage === 1" style="background-color: #ffffff; border: 1px solid #e2e8f0; color: #64748b; padding: 8px 12px; border-radius: 8px; cursor: pointer; transition: all 0.3s ease; display: inline-flex; align-items: center; gap: 6px; font-size: 0.875rem;" onmouseover="this.style.backgroundColor='#f8fafc'; this.style.borderColor='#cbd5e1';" onmouseout="this.style.backgroundColor='#ffffff'; this.style.borderColor='#e2e8f0';" [style.opacity]="currentPage === 1 ? '0.5' : '1'" [style.cursor]="currentPage === 1 ? 'not-allowed' : 'pointer'">-->
<!--          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">-->
<!--            <path d="M15 18L9 12L15 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>-->
<!--          </svg>-->
<!--          Previous-->
<!--        </button>-->
<!--        <div class="page-numbers" style="display: flex; gap: 4px;">-->
<!--          <button *ngFor="let page of getPageNumbers()" (click)="goToPage(page)" [style.backgroundColor]="page === currentPage ? '#2596be' : 'transparent'" [style.color]="page === currentPage ? 'white' : '#64748b'" style="border: 1px solid #e2e8f0; padding: 8px 12px; border-radius: 8px; cursor: pointer; transition: all 0.3s ease; font-size: 0.875rem; min-width: 36px;" onmouseover="this.style.backgroundColor=page === currentPage ? '#2596be' : '#f8fafc'; this.style.borderColor='#cbd5e1';" onmouseout="this.style.backgroundColor=page === currentPage ? '#2596be' : 'transparent'; this.style.borderColor='#e2e8f0';">-->
<!--            {{ page }}-->
<!--          </button>-->
<!--        </div>-->
<!--        <button (click)="nextPage()" [disabled]="currentPage * itemsPerPage >= filteredLessons.length" style="background-color: #ffffff; border: 1px solid #e2e8f0; color: #64748b; padding: 8px 12px; border-radius: 8px; cursor: pointer; transition: all 0.3s ease; display: inline-flex; align-items: center; gap: 6px; font-size: 0.875rem;" onmouseover="this.style.backgroundColor='#f8fafc'; this.style.borderColor='#cbd5e1';" onmouseout="this.style.backgroundColor='#ffffff'; this.style.borderColor='#e2e8f0';" [style.opacity]="currentPage * itemsPerPage >= filteredLessons.length ? '0.5' : '1'" [style.cursor]="currentPage * itemsPerPage >= filteredLessons.length ? 'not-allowed' : 'pointer'">-->
<!--          Next-->
<!--          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">-->
<!--            <path d="M9 18L15 12L9 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>-->
<!--          </svg>-->
<!--        </button>-->
<!--      </div>-->
<!--    </div>-->
  </div>
</div>

<!-- Add/Edit Modal Template -->
<ng-template #lessonModal let-modal>
  <div class="modal-container p-5" style="background-color: white; border-radius: 15px; max-width: 1200px; width: 100%; box-shadow: 0 5px 15px rgba(0,0,0,0.2);">
    <div class="modal-header d-flex justify-content-between align-items-center" style="padding: 20px; border-bottom: 1px solid #dee2e6;">
      <h5 class="modal-title m-0" style="color: #212529; font-weight: 700; font-size: 1.5rem;">
        {{ isEditMode ? 'Edit Lesson' : 'Add New Lesson' }}
      </h5>
      <button type="button" class="btn-close" (click)="modal.dismiss()" style="font-size: 1.2rem; opacity: 0.7;" aria-label="Close"></button>
    </div>
    <div class="modal-body" style="padding: 20px;">
      <form [formGroup]="lessonForm" (ngSubmit)="onSubmit()" class="row g-3">
        <div class="col-md-6">
          <label class="form-label fw-medium" style="color: #495057;">Teacher</label>
          <select class="form-select" formControlName="teacherId" style="border-radius: 8px; padding: 10px;">
            <option value="">Select Teacher</option>
            <option *ngFor="let teacher of teachers" [value]="teacher.id">
              {{ teacher.name }} (ID: {{ teacher.id }})
            </option>
          </select>
        </div>

        <div class="col-md-6">
          <label class="form-label fw-medium" style="color: #495057;">Game</label>
          <select class="form-select" formControlName="gameId" style="border-radius: 8px; padding: 10px;">
            <option value="">Select Game</option>
            <option *ngFor="let game of games" [value]="game.gameId">
              {{ game.title }} (ID: {{ game.gameId }})
            </option>
          </select>
        </div>

        <div class="col-md-12">
          <label class="form-label fw-medium" style="color: #495057;">Title</label>
          <input type="text" class="form-control" formControlName="title" style="border-radius: 8px; padding: 10px;">
        </div>

        <div class="col-md-12">
          <label class="form-label fw-medium" style="color: #495057;">Description</label>
          <textarea class="form-control" formControlName="description" style="border-radius: 8px; padding: 10px; min-height: 100px;"></textarea>
        </div>

        <div class="col-md-4">
          <label class="form-label fw-medium" style="color: #495057;">Price</label>
          <input type="number" class="form-control" formControlName="price" style="border-radius: 8px; padding: 10px;">
        </div>

        <div class="col-md-4">
          <label class="form-label fw-medium" style="color: #495057;">Currency</label>
          <input type="text" class="form-control" formControlName="currency" style="border-radius: 8px; padding: 10px;">
        </div>

        <div class="col-md-4 d-flex align-items-end">
          <div class="form-check">
            <input type="checkbox" class="form-check-input" formControlName="isFree" id="isFreeCheck">
            <label class="form-check-label fw-medium" for="isFreeCheck" style="color: #495057;">Is Free</label>
          </div>
        </div>

        <div class="col-md-6">
          <label class="form-label fw-medium" style="color: #495057;">Duration (minutes)</label>
          <input type="number" class="form-control" formControlName="durationMinutes" style="border-radius: 8px; padding: 10px;">
        </div>

        <div class="col-md-6">
          <label class="form-label fw-medium" style="color: #495057;">Difficulty Level</label>
          <select class="form-select" formControlName="difficultyLevel" style="border-radius: 8px; padding: 10px;">
            <option value="Beginner">Beginner</option>
            <option value="Intermediate">Intermediate</option>
            <option value="Advanced">Advanced</option>
          </select>
        </div>

        <div class="col-md-6">
          <label class="form-label fw-medium" style="color: #495057;">Min Recommended Age</label>
          <input type="number" class="form-control" formControlName="minRecommendedAge" style="border-radius: 8px; padding: 10px;">
        </div>

        <div class="col-md-6">
          <label class="form-label fw-medium" style="color: #495057;">Max Recommended Age</label>
          <input type="number" class="form-control" formControlName="maxRecommendedAge" style="border-radius: 8px; padding: 10px;">
        </div>

        <div class="col-md-12">
          <label class="form-label fw-medium" style="color: #495057;">Video URL</label>
          <input type="text" class="form-control" formControlName="videoUrl" style="border-radius: 8px; padding: 10px;">
        </div>

        <div class="col-md-12">
          <label class="form-label fw-medium" style="color: #495057;">Thumbnail</label>
          <input type="file" #thumbnailInput (change)="onThumbnailSelected($event)" accept="image/*" style="display: none;">
          <div *ngIf="lessonForm.get('thumbnailUrl')?.value" class="mb-3">
            <img [src]="lessonForm.get('thumbnailUrl')?.value" style="max-width: 250px; border-radius: 8px; border: 1px solid #dee2e6;">
          </div>
          <div class="d-flex gap-2">
            <button type="button" class="btn btn-outline-primary" (click)="thumbnailInput.click()" style="border-radius: 8px;">
              <i class="bi bi-upload"></i> Select Image
            </button>
            <button type="button" *ngIf="selectedThumbnailFile" class="btn btn-success" (click)="uploadThumbnail()" [disabled]="isUploading" style="border-radius: 8px;">
              <span *ngIf="!isUploading"><i class="bi bi-cloud-upload"></i> Upload</span>
              <span *ngIf="isUploading"><i class="bi bi-hourglass"></i> Uploading...</span>
            </button>
            <button type="button" *ngIf="lessonForm.get('thumbnailUrl')?.value" class="btn btn-danger" (click)="clearThumbnail()" style="border-radius: 8px;">
              <i class="bi bi-trash"></i> Clear
            </button>
          </div>
          <div *ngIf="isUploading" class="mt-2">
            <div class="progress" style="height: 8px; border-radius: 4px;">
              <div class="progress-bar bg-primary" [style.width.%]="uploadProgress" style="border-radius: 4px;"></div>
            </div>
            <small class="text-muted">Uploading: {{uploadProgress}}%</small>
          </div>
          <input type="text" class="form-control" formControlName="thumbnailUrl" style="display: none;">
        </div>

        <div *ngIf="isEditMode" class="col-md-4">
          <div class="form-check">
            <input type="checkbox" class="form-check-input" formControlName="isActive" id="isActiveCheck">
            <label class="form-check-label fw-medium" for="isActiveCheck" style="color: #495057;">Is Active</label>
          </div>
        </div>

        <div *ngIf="isEditMode" class="col-md-4">
          <div class="form-check">
            <input type="checkbox" class="form-check-input" formControlName="isPurchasable" id="isPurchasableCheck">
            <label class="form-check-label fw-medium" for="isPurchasableCheck" style="color: #495057;">Is Purchasable</label>
          </div>
        </div>

        <div *ngIf="isEditMode" class="col-md-4">
          <label class="form-label fw-medium" style="color: #495057;">Status</label>
          <select class="form-select" formControlName="status" style="border-radius: 8px; padding: 10px;">
            <option *ngFor="let status of lessonStatuses" [value]="status">{{ status }}</option>
          </select>
        </div>

        <div class="modal-footer d-flex justify-content-end gap-2 mt-4" style="border-top: none; padding: 20px;">
          <button type="button" class="btn btn-outline-secondary" (click)="modal.dismiss()" style="border-radius: 8px; padding: 10px 20px;">
            Cancel
          </button>
          <button type="submit" class="btn btn-primary" [disabled]="lessonForm.invalid" style="border-radius: 8px; padding: 10px 20px;">
            {{ isEditMode ? 'Update' : 'Create' }}
          </button>
        </div>
      </form>
    </div>
  </div>
</ng-template>

<!-- Delete Confirmation Modal Template -->
<ng-template #deleteModal let-modal>
  <div class="delete-modal-container" style="background-color: white; border-radius: 10px; max-width: 500px; width: 100%;">
    <div class="modal-header" style="padding: 16px; border-bottom: 1px solid #e9ecef; display: flex; justify-content: space-between; align-items: center;">
      <h5 class="modal-title" style="margin: 0; color: #343a40; font-weight: 600;">Confirm Delete</h5>
      <button type="button" class="close-btn" (click)="modal.dismiss()" style="background: none; border: none; font-size: 1.5rem; cursor: pointer; color: #6c757d;">×</button>
    </div>
    <div class="modal-body" style="padding: 16px;">
      <p style="margin: 0; color: #343a40;">Are you sure you want to delete this lesson?</p>
    </div>
    <div class="modal-footer" style="padding: 16px; border-top: 1px solid #e9ecef; display: flex; justify-content: flex-end; gap: 12px;">
      <button type="button" class="cancel-btn" (click)="modal.dismiss()" style="padding: 8px 16px; border: 1px solid #6c757d; background-color: white; color: #6c757d; border-radius: 6px; cursor: pointer; transition: all 0.2s;">Cancel</button>
      <button type="button" class="delete-confirm-btn" (click)="deleteLesson()" style="padding: 8px 16px; border: none; background-color: #dc3545; color: white; border-radius: 6px; cursor: pointer; transition: all 0.2s;">Delete</button>
    </div>
  </div>
</ng-template>
